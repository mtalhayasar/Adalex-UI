<div
  class="a-register-form"
  data-auth-form
>
  <form
    action="{{ action|default:'' }}"
    method="POST"
    class="a-register-form__form"
    novalidate
  >
    {% csrf_token %}

    {% if title %}
      <h2 class="a-register-form__title">{{ title }}</h2>
    {% endif %}

    {% if subtitle %}
      <p class="a-register-form__subtitle">{{ subtitle }}</p>
    {% endif %}

    <div class="a-register-form__fields">
      {% if show_name %}
        <div class="a-register-form__field">
          {% include "components/label.html" with for_id="register-name" text="Full Name" required=True %}
          {% include "components/text_input.html" with type="text" name="name" id="register-name" placeholder="Enter your full name" required=True error=name_error %}
        </div>
      {% endif %}

      <div class="a-register-form__field">
        {% include "components/label.html" with for_id="register-email" text="Email" required=True %}
        {% include "components/text_input.html" with type="email" name="email" id="register-email" placeholder="Enter your email" required=True error=email_error %}
      </div>

      <div class="a-register-form__field">
        {% include "components/label.html" with for_id="register-password" text="Password" required=True %}
        <div class="a-register-form__password-wrapper" data-password-wrapper>
          {% include "components/text_input.html" with type="password" name="password" id="register-password" placeholder="Create a password" required=True error=password_error %}
          <button
            type="button"
            class="a-register-form__password-toggle"
            data-password-toggle
            aria-label="Toggle password visibility"
          >
            <span class="a-register-form__icon a-register-form__icon--show">
              {% include "components/icon.html" with name="visibility" size="20" %}
            </span>
            <span class="a-register-form__icon a-register-form__icon--hide">
              {% include "components/icon.html" with name="visibility-off" size="20" %}
            </span>
          </button>
        </div>
        {% if password_help %}
          <span class="a-register-form__help-text">{{ password_help }}</span>
        {% endif %}
      </div>

      <div class="a-register-form__field">
        {% include "components/label.html" with for_id="register-password-confirm" text="Confirm Password" required=True %}
        <div class="a-register-form__password-wrapper" data-password-wrapper>
          {% include "components/text_input.html" with type="password" name="password_confirm" id="register-password-confirm" placeholder="Re-enter your password" required=True error=password_confirm_error %}
          <button
            type="button"
            class="a-register-form__password-toggle"
            data-password-toggle
            aria-label="Toggle password visibility"
          >
            <span class="a-register-form__icon a-register-form__icon--show">
              {% include "components/icon.html" with name="visibility" size="20" %}
            </span>
            <span class="a-register-form__icon a-register-form__icon--hide">
              {% include "components/icon.html" with name="visibility-off" size="20" %}
            </span>
          </button>
        </div>
      </div>

      {% if show_terms %}
        <div class="a-register-form__terms">
          {% include "components/checkbox.html" with name="terms" id="register-terms" label=terms_label|default:"I agree to the Terms of Service and Privacy Policy" required=True %}
        </div>
      {% endif %}
    </div>

    {% if error_message %}
      <div class="a-register-form__error" role="alert">
        {% include "components/alert.html" with type="error" message=error_message dismissible=False %}
      </div>
    {% endif %}

    <div class="a-register-form__actions">
      {% include "components/button.html" with type="submit" variant="primary" text="Create Account" full_width=True %}
    </div>

    {% if show_login_link %}
      <div class="a-register-form__links">
        <span class="a-register-form__link-text">Already have an account?</span>
        <a href="{{ login_url|default:'#' }}" class="a-register-form__link">Sign in</a>
      </div>
    {% endif %}
  </form>
</div>
